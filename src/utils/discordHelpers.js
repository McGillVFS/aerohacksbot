\nconst { Permissions } = require(\'discord.js\');\n\n/**\n * Sanitizes a string for use as a Discord role name.\n * @param {string} name - The original role name.\n * @returns {string} The sanitized role name.\n */\nfunction sanitizeRoleName(name) {\n  return name.replace(/[\\`*_{}[\]()#+\\-.!]/g, \'\').trim();\n}\n\n/**\n * Finds an existing role or creates a new one if it doesn\'t exist.\n * @param {import(\'discord.js\').Guild} guild - The guild to create the role in.\n * @param {string} roleName - The name of the role.\n * @param {string} [color] - The color of the role.\n * @returns {Promise<import(\'discord.js\').Role|null>} The role object or null if an error occurs.\n */\nasync function getOrCreateRole(guild, roleName, color = \'#DEFAULT\') {\n  const sanitizedRoleName = sanitizeRoleName(roleName);\n  if (!sanitizedRoleName) return null;\n\n  const existingRole = guild.roles.cache.find(role => role.name.toLowerCase() === sanitizedRoleName.toLowerCase());\n  if (existingRole) return existingRole;\n\n  if (guild.roles.cache.size >= 250) {\n    console.warn(`Role limit reached. Could not create role: \"${sanitizedRoleName}\"`);\n    return null;\n  }\n\n  try {\n    const newRole = await guild.roles.create({\n      name: sanitizedRoleName,\n      color,\n      permissions: [],\n    });\n    return newRole;\n  } catch (error) {\n    console.error(`Failed to create role \"${sanitizedRoleName}\":`, error);\n    return null;\n  }\n}\n\nmodule.exports = { getOrCreateRole, sanitizeRoleName };\n